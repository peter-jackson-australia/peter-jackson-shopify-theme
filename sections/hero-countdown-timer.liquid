{% comment %}
  Hero Countdown Timer Section
{% endcomment %}

{{ 'section-hero-countdown.css' | asset_url | stylesheet_tag }}

{% assign section_id = section.id %}
{% assign heading = section.settings.heading %}
{% assign background_image = section.settings.background_image %}
{% assign background_image_alt = section.settings.background_image_alt %}
{% assign horizontal_alignment = section.settings.horizontal_alignment %}
{% assign vertical_alignment = section.settings.vertical_alignment %}
{% assign subheading = section.settings.subheading %}
{% assign final_message = section.settings.final_message %}
{% assign complete_message = section.settings.complete_message %}
{% assign target_date = section.settings.target_date %}
{% assign final_hours_threshold = section.settings.final_hours_threshold %}

{% assign heading_animation = section.settings.heading_animation %}
{% assign subheading_animation = section.settings.subheading_animation %}
{% assign final_message_animation = section.settings.final_message_animation %}
{% assign complete_message_animation = section.settings.complete_message_animation %}
{% assign animate_timer_blocks = section.settings.animate_timer_blocks %}

{% assign days_label = section.settings.days_label %}
{% assign hours_label = section.settings.hours_label %}
{% assign minutes_label = section.settings.minutes_label %}
{% assign seconds_label = section.settings.seconds_label %}

{% assign button_label = section.settings.button_label %}
{% assign button_link = section.settings.button_link %}

<div id="countdown-timer-{{ section_id }}" class="countdown-timer">
  {% if background_image %}
    {{
      background_image
      | image_url: width: 3000
      | image_tag: class: 'countdown-timer__background', alt: background_image_alt
      | default: heading,
        loading: 'eager',
        decoding: 'async',
        widths: '400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000, 2400, 3000',
        sizes: '(max-width: 400px) 400px, (max-width: 600px) 600px, (max-width: 800px) 800px, (max-width: 1000px) 1000px, (max-width: 1200px) 1200px, (max-width: 1400px) 1400px, (max-width: 1600px) 1600px, (max-width: 1800px) 1800px, (max-width: 2000px) 2000px, (max-width: 2400px) 2400px, 100vw'
    }}
  {% endif %}

  <div class="countdown-timer__container countdown-timer__container--{{ horizontal_alignment | default: 'center' }} countdown-timer__container--{{ vertical_alignment | default: 'bottom' }}">
    {% if heading != blank %}
      <h1 class="countdown-timer__heading heading--3xl {% if heading_animation != 'none' %}{{ heading_animation }}{% endif %}">
        {{ heading }}
      </h1>
    {% endif %}

    {% if subheading != blank %}
      <div class="countdown-timer__subheading heading--l {% if subheading_animation != 'none' %}{{ subheading_animation }}{% endif %}">
        {{ subheading }}
      </div>
    {% endif %}

    <div
      id="countdown-timer-blocks-{{ section_id }}"
      class="countdown-timer__blocks {% if animate_timer_blocks %}animate-container-cards-scroll{% endif %}"
    >
      <div class="countdown-timer__block">
        <div id="countdown-timer-days-{{ section_id }}" class="countdown-timer__value heading--xl">00</div>
        <div class="countdown-timer__label body--uppercase">
          {{ days_label | default: 'Days' }}
        </div>
      </div>

      <div class="countdown-timer__block">
        <div id="countdown-timer-hours-{{ section_id }}" class="countdown-timer__value heading--xl">00</div>
        <div class="countdown-timer__label body--uppercase">
          {{ hours_label | default: 'Hours' }}
        </div>
      </div>

      <div class="countdown-timer__block">
        <div id="countdown-timer-minutes-{{ section_id }}" class="countdown-timer__value heading--xl">00</div>
        <div class="countdown-timer__label body--uppercase">
          {{ minutes_label | default: 'Minutes' }}
        </div>
      </div>

      <div class="countdown-timer__block">
        <div id="countdown-timer-seconds-{{ section_id }}" class="countdown-timer__value heading--xl">00</div>
        <div class="countdown-timer__label body--uppercase">
          {{ seconds_label | default: 'Seconds' }}
        </div>
      </div>
    </div>

    <div
      id="countdown-timer-final-{{ section_id }}"
      class="countdown-timer__final-message countdown-timer__message heading--xl {% if final_message_animation != 'none' %}{{ final_message_animation }}{% endif %}"
    >
      {{ final_message | default: 'Final hours! Do not miss out!' }}
    </div>

    <div
      id="countdown-timer-complete-{{ section_id }}"
      class="countdown-timer__complete-message countdown-timer__message heading--xl {% if complete_message_animation != 'none' %}{{ complete_message_animation }}{% endif %}"
    >
      {{ complete_message | default: 'The countdown has ended!' }}
    </div>

    {% if button_label != blank and button_link != blank %}
      <div class="countdown-timer__button-container body">
        <a
          href="{{ button_link }}"
          class="button button--white body"
        >
          {{ button_label }}
        </a>
      </div>
    {% endif %}
  </div>
</div>

<script
  src="{{ "section-hero-countdown-timer.js" | asset_url }}"
  data-section-id="{{ section_id }}"
  data-target-date="{{ target_date }}"
  data-final-hours-threshold="{{ final_hours_threshold | default: 3 }}"
  defer
></script>

{% schema %}
{
  "name": "Hero Countdown Timer",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Countdown Settings"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Limited Time Offer"
    },
    {
      "type": "select",
      "id": "heading_animation",
      "label": "Heading Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Do not miss out on this special offer!"
    },
    {
      "type": "select",
      "id": "subheading_animation",
      "label": "Subheading Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "text",
      "id": "target_date",
      "label": "Target Date and Time (Melbourne)",
      "default": "2025-12-31T23:59:59",
      "info": "Enter date in format: YYYY-MM-DDTHH:MM:SS (e.g., 2025-12-31T23:59:59)"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "horizontal_alignment",
      "label": "Horizontal Alignment",
      "default": "center",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ]
    },
    {
      "type": "select",
      "id": "vertical_alignment",
      "label": "Vertical Alignment",
      "default": "bottom",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "middle",
          "label": "Middle"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ]
    },
    {
      "type": "header",
      "content": "Animation Settings"
    },
    {
      "type": "checkbox",
      "id": "animate_timer_blocks",
      "label": "Animate Timer Blocks",
      "default": false,
      "info": "Adds a staggered animation to the timer blocks as they scroll into view"
    },
    {
      "type": "header",
      "content": "Timer Labels"
    },
    {
      "type": "text",
      "id": "days_label",
      "label": "Days Label",
      "default": "Days"
    },
    {
      "type": "text",
      "id": "hours_label",
      "label": "Hours Label",
      "default": "Hours"
    },
    {
      "type": "text",
      "id": "minutes_label",
      "label": "Minutes Label",
      "default": "Minutes"
    },
    {
      "type": "text",
      "id": "seconds_label",
      "label": "Seconds Label",
      "default": "Seconds"
    },
    {
      "type": "header",
      "content": "Messages"
    },
    {
      "type": "range",
      "id": "final_hours_threshold",
      "min": 1,
      "max": 48,
      "step": 1,
      "default": 3,
      "label": "Final Hours Threshold (hours)",
      "info": "Show the final hours message when this many hours remain"
    },
    {
      "type": "text",
      "id": "final_message",
      "label": "Final Hours Message",
      "default": "Final hours! Do not miss out!"
    },
    {
      "type": "select",
      "id": "final_message_animation",
      "label": "Final Message Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "text",
      "id": "complete_message",
      "label": "Completion Message",
      "default": "The countdown has ended!"
    },
    {
      "type": "select",
      "id": "complete_message_animation",
      "label": "Complete Message Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "header",
      "content": "Button (Optional)"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    }
  ],
  "presets": [
    {
      "name": "Hero Countdown Timer",
      "category": "Hero"
    }
  ]
}
{% endschema %}
