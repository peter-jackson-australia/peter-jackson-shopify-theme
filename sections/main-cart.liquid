{% comment %} sections/main-cart.liquid {% endcomment %}

<form action="{{ routes.cart_url }}" method="post" class="main-cart">
  <!--
    Add the data-ajax-cart-section attribute
    to a container that must be re-rendered
    when the user's cart gets changed
  -->
  <div data-ajax-cart-section>
    <h2>Cart</h2>

    <div class="main-cart__items" data-ajax-cart-section-scroll>
      {% for item in cart.items %}
        {% assign item_index = forloop.index %}
        <hr>
        <div>
          <a href="{{ item.url }}">{{ item.title }}</a>
        </div>
        <div>Price: {{ item.final_price | money }}</div>

        <div>
          Quantity:

          <!-- Wrap the quantity control in the <ajax-cart-quantity> custom tag -->
          <ajax-cart-quantity>
            <!-- Add the data-ajax-cart-quantity-minus attribute to the "Minus" button -->
            <a
              data-ajax-cart-quantity-minus
              href="{{ routes.cart_change_url }}?line={{ item_index }}&quantity={{ item.quantity | minus: 1 }}"
            >
              Minus one
            </a>

            <!-- Add the data-ajax-cart-quantity-input attribute to quantity input fields -->
            <input
              data-ajax-cart-quantity-input="{{ item_index }}"
              name="updates[]"
              value="{{ item.quantity }}"
              type="number"
            >

            <!-- Add the data-ajax-cart-quantity-plus attribute to the "Plus" button -->
            <a
              data-ajax-cart-quantity-plus
              href="{{ routes.cart_change_url }}?line={{ item_index }}&quantity={{ item.quantity | plus: 1 }}"
            >
              Plus one
            </a>
          </ajax-cart-quantity>
        </div>

        <!-- Place a data-ajax-cart-errors container for error messages -->
        <div data-ajax-cart-errors="{{ item.key }}"></div>

        <div>
          Total: <strong>{{ item.final_line_price | money }}</strong>
        </div>
      {% endfor %}
    </div>

    <button type="submit" name="checkout">Checkout â€” {{ cart.total_price | money_with_currency }}</button>
  </div>
</form>

{% schema %} { "name": "Main Cart" } {% endschema %}
