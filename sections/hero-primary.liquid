{{ 'section-hero-primary.css' | asset_url | stylesheet_tag }}

{% assign mobile_video = section.settings.mobile_video %}
{% assign mobile_image = section.settings.mobile_image %}
{% assign mobile_image_alt = section.settings.mobile_image.alt %}
{% assign mobile_video_placeholder = section.settings.mobile_video_placeholder %}
{% assign desktop_image = section.settings.desktop_image %}
{% assign desktop_image_alt = section.settings.desktop_image.alt %}
{% assign video = section.settings.video %}
{% assign video_placeholder = section.settings.video_placeholder %}
{% assign heading = section.settings.heading %}
{% assign media_type = section.settings.media_type %}
{% assign poster_url = section.settings.video_placeholder | image_url %}
{% assign poster_url_mobile = section.settings.mobile_video_placeholder
  | default: section.settings.video_placeholder
  | image_url
%}
{% assign poster_url_mobile = mobile_video_placeholder | default: video_placeholder | image_url %}

{% assign horizontal_alignment = section.settings.horizontal_alignment %}
{% assign vertical_alignment = section.settings.vertical_alignment %}
{% assign mobile_horizontal_alignment = section.settings.mobile_horizontal_alignment %}
{% assign mobile_vertical_alignment = section.settings.mobile_vertical_alignment %}
{% assign heading = section.settings.heading %}
{% assign heading_level = section.settings.heading_level %}
{% assign heading_animation = section.settings.heading_animation %}
{% assign description = section.settings.description %}
{% assign description_animation = section.settings.description_animation %}
{% assign svg_image = section.settings.svg_image %}
{% assign svg_size = section.settings.svg_size %}
{% assign mobile_svg_image = section.settings.mobile_svg_image %}

{% if mobile_video %}
  <style>
    @media screen and (max-width: 768px) {
      #hero-primary .hero__video--desktop {
        display: none;
      }
      #hero-primary .hero__video--mobile {
        display: block;
      }
    }
  </style>
{% endif %}

{% if desktop_image or mobile_image or video %}
  <div id="hero-primary" class="hero" aria-label="{{ heading | escape }}">
    {% if media_type == 'image' %}
      <picture>
        {% if mobile_image %}
          <source
            media="(max-width: 768px)"
            srcset="
              {{ mobile_image | image_url: width: 400 }} 1x,
              {{ mobile_image | image_url: width: 800 }} 2x
            "
          >
        {% endif %}

        {% if desktop_image %}
          {{
            desktop_image
            | image_url: width: 2560
            | image_tag:
              class: 'hero__background',
              alt: desktop_image_alt,
              widths: '400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000, 2400, 2560',
              sizes: '(max-width: 400px) 400px, (max-width: 600px) 600px, (max-width: 800px) 800px, (max-width: 1000px) 1000px, (max-width: 1200px) 1200px, (max-width: 1400px) 1400px, (max-width: 1600px) 1600px, (max-width: 1800px) 1800px, (max-width: 2000px) 2000px, (max-width: 2560px) 2560px, 100vw'
          }}
        {% elsif mobile_image %}
          {{
            mobile_image
            | image_url: width: 500
            | image_tag:
              class: 'hero__background',
              alt: mobile_image_alt,
              widths: '400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000, 2400, 2560',
              sizes: '(max-width: 400px) 400px, (max-width: 600px) 600px, (max-width: 800px) 800px, (max-width: 1000px) 1000px, (max-width: 1200px) 1200px, (max-width: 1400px) 1400px, (max-width: 1600px) 1600px, (max-width: 1800px) 1800px, (max-width: 2000px) 2000px, (max-width: 2560px) 2560px, 100vw'
          }}
        {% endif %}
      </picture>
    {% elsif media_type == 'video' %}
      {% if video %}
        <div class="hero__video hero__video--desktop">
          {{
            video
            | video_tag:
              autoplay: true,
              loop: true,
              muted: true,
              controls: false,
              playsinline: true,
              poster: poster_url,
              class: 'hero__video-element'
          }}
        </div>
      {% endif %}

      {% if mobile_video %}
        <div class="hero__video hero__video--mobile">
          {{
            mobile_video
            | video_tag:
              autoplay: true,
              loop: true,
              muted: true,
              controls: false,
              playsinline: true,
              poster: poster_url_mobile,
              class: 'hero__video-element'
          }}
        </div>
      {% endif %}
    {% endif %}

    <div class="hero__content hero__content--{{ horizontal_alignment | default: 'center' }} hero__content--{{ vertical_alignment | default: 'bottom' }} hero__content--mobile-{{ mobile_horizontal_alignment | default: 'center' }} hero__content--mobile-{{ mobile_vertical_alignment | default: section.settings.vertical_alignment | default: 'bottom' }}">
      {% if svg_image %}
        <img
          src="{{ svg_image | image_url }}"
          alt="{{ heading | escape }}"
          class="hero__svg hero__svg--{{ svg_size | default: 'medium' }} hero__svg--desktop"
          width="{{ svg_image.width }}"
          height="{{ svg_image.height }}"
          loading="eager"
          fetchpriority="high"
        >
        {% if mobile_svg_image %}
          <img
            src="{{ mobile_svg_image | image_url }}"
            alt="{{ heading | escape }}"
            class="hero__svg hero__svg--{{ svg_size | default: 'medium' }} hero__svg--mobile"
            width="{{ mobile_svg_image.width }}"
            height="{{ mobile_svg_image.height }}"
            loading="eager"
            fetchpriority="high"
          >
        {% endif %}
      {% elsif heading %}
        <{{ heading_level | default: 'h1' }} class="heading--3xl {% if heading_animation != 'none' %}{{ heading_animation }}{% endif %}">
          {{ heading }}
        </{{ heading_level | default: 'h1' }}>
      {% endif %}

      <div class="heading--l {% if description_animation != 'none' %}{{ description_animation }}{% endif %}">
        <p class="hero__description heading--l ">
          {{ description }}
        </p>
      </div>

      <div class="hero__buttons">
        {% for i in (1..4) %}
          {% assign current_button_label_field = 'button_label_' | append: i %}
          {% assign current_button_link_field = 'button_link_' | append: i %}
          {% assign button_label = section.settings[current_button_label_field] %}
          {% assign button_link = section.settings[current_button_link_field] %}

          {% if button_label and button_link %}
            <a
              href="{{ button_link }}"
              class="button button--white body"
              aria-label="{{ button_label | escape }}"
            >
              {{ button_label }}
            </a>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
{% endif %}

{% schema %}
{
  "name": "Hero Section",
  "tag": "section",
  "settings": [
    {
      "type": "select",
      "id": "media_type",
      "label": "Media Type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Background Image",
      "info": "Used when Media Type is set to Image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Background Image",
      "info": "If not provided, Desktop Image will be used on mobile devices"
    },
    {
      "type": "video",
      "id": "video",
      "label": "Background Video",
      "info": "Used when Media Type is set to Video"
    },
    {
      "type": "video",
      "id": "mobile_video",
      "label": "Mobile Background Video",
      "info": "Optional mobile-specific video"
    },
    {
      "type": "image_picker",
      "id": "video_placeholder",
      "label": "Video Placeholder Image",
      "info": "Shown while video loads or if video fails to load"
    },
    {
      "type": "image_picker",
      "id": "mobile_video_placeholder",
      "label": "Mobile Video Placeholder Image",
      "info": "Shown while mobile video loads"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Welcome to Our Store"
    },
    {
      "type": "image_picker",
      "id": "svg_image",
      "label": "SVG Image (replaces heading)",
      "info": "Upload an SVG file. If selected, this will be used instead of the heading text above."
    },
    {
      "type": "select",
      "id": "svg_size",
      "label": "SVG Size",
      "options": [
        {
          "value": "small",
          "label": "Small (320px max)"
        },
        {
          "value": "medium",
          "label": "Medium (650px max)"
        },
        {
          "value": "large",
          "label": "Large (900px max)"
        },
        {
          "value": "full",
          "label": "Full (100%)"
        }
      ],
      "default": "medium",
      "info": "Maximum width for SVG image. Image will never exceed screen width."
    },
    {
      "type": "image_picker",
      "id": "mobile_svg_image",
      "label": "Mobile SVG Image",
      "info": "Please provide a mobile SVG, you can reuse the same one from Desktop if needed"
    },
    {
      "type": "select",
      "id": "heading_level",
      "label": "Heading Level",
      "options": [
        {
          "value": "h1",
          "label": "H1"
        },
        {
          "value": "h2",
          "label": "H2"
        },
        {
          "value": "h3",
          "label": "H3"
        },
        {
          "value": "h4",
          "label": "H4"
        },
        {
          "value": "h5",
          "label": "H5"
        },
        {
          "value": "h6",
          "label": "H6"
        }
      ],
      "default": "h1"
    },
    {
      "type": "select",
      "id": "heading_animation",
      "label": "Heading Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default": "Discover our latest collection"
    },
    {
      "type": "select",
      "id": "description_animation",
      "label": "Description Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "text",
      "id": "button_label_1",
      "label": "Button 1 Text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link_1",
      "label": "Button 1 Link"
    },
    {
      "type": "text",
      "id": "button_label_2",
      "label": "Button 2 Text"
    },
    {
      "type": "url",
      "id": "button_link_2",
      "label": "Button 2 Link"
    },
    {
      "type": "text",
      "id": "button_label_3",
      "label": "Button 3 Text"
    },
    {
      "type": "url",
      "id": "button_link_3",
      "label": "Button 3 Link"
    },
    {
      "type": "text",
      "id": "button_label_4",
      "label": "Button 4 Text"
    },
    {
      "type": "url",
      "id": "button_link_4",
      "label": "Button 4 Link"
    },
    {
      "type": "select",
      "id": "horizontal_alignment",
      "label": "Horizontal Alignment",
      "default": "center",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ]
    },
    {
      "type": "select",
      "id": "vertical_alignment",
      "label": "Vertical Alignment",
      "default": "bottom",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "middle",
          "label": "Middle"
        },
        {
          "value": "stretch",
          "label": "Stretch"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ]
    },
    {
      "type": "select",
      "id": "mobile_horizontal_alignment",
      "label": "Mobile Horizontal Alignment",
      "default": "center",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ]
    },
    {
      "type": "select",
      "id": "mobile_vertical_alignment",
      "label": "Mobile Vertical Alignment",
      "default": "bottom",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "middle",
          "label": "Middle"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hero Section",
      "category": "Hero"
    }
  ],
  "enabled_on": {
    "templates": ["index", "page", "article", "blog"]
  }
}
{% endschema %}
