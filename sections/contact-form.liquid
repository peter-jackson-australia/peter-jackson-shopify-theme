{% comment %} Contact Form Section {% endcomment %}

{{ 'section-contact-form.css' | asset_url | stylesheet_tag }}

{% assign image = section.settings.image %}
{% assign heading = section.settings.heading %}
{% assign description = section.settings.description %}
{% assign fields = section.blocks %}
{% assign rows = section.settings.rows %}
{% assign button_label = section.settings.button_label %}

<div class="contact-form">
  {% if image %}
    {% assign image_alt = image.alt %}
    <div class="contact-form__image-container">
      {{ image | image_url: width: 1000 | image_tag: alt: image_alt, class: 'contact-form__image' }}
    </div>
  {% endif %}

  <div class="contact-form__form-container {% unless image %}contact-form__form-container--full-width{% endunless %}">
    <div class="contact-form__content">
      {% if heading %}
        <h1 class="contact-form__heading heading--3xl">{{ heading }}</h1>
      {% endif %}

      <div class="contact-form__contact-info">
        <a class="contact-form__stores body" href="/pages/stores-in-australia">
          Find A Store <span>{% render '_icon-arrow-submit-dark' %}</span>
        </a>
        <a class="contact-form__phone-number body" href="tel:0394156281">(03) 9415 6281</a>
        <a
          target="_blank"
          class="contact-form__head-office-location body"
          href="https://www.google.com/maps/place/Peter+Jackson+Head+Office/@-37.8069921,144.992147,17z/data=!3m1!4b1!4m6!3m5!1s0x6ad643e38b24c549:0xc1d8f10c68c9c0f6!8m2!3d-37.8069921!4d144.992147!16s%2Fg%2F11xfq0351_?entry=ttu&g_ep=EgoyMDI1MDgwNC4wIKXMDSoASAFQAw%3D%3D"
          >50-54 Hoddle St, Abbotsford VIC 3067</a
        >
        <div class="body">
          <strong class="body--bold">Follow Us:</strong>
          <a class="body" href="https://www.facebook.com/peterjacksonmenswear/" target="_blank">Facebook</a>
          <a class="body" href="https://www.instagram.com/peterjacksonau/" target="_blank">Instagram</a>
          <a></a>
        </div>
      </div>

      {% if description %}
        <div class="contact-form__description body">{{ description }}</div>
      {% endif %}

      {% form 'contact', class: 'contact-form__form' %}
        {%- for field in fields -%}
          {% assign field_type = field.type %}
          {% assign field_name = field.settings.name %}
          {% assign field_id = field_name | handleize | prepend: 'contact_' %}
          {% assign field_title = field.settings.title %}
          {% assign is_required = field.settings.required %}
          {% assign field_placeholder = field.settings.placeholder %}
          {% assign field_value_maxlength = field.settings.maxlength %}
          {% assign field_text = field.settings.text %}

          {%- case field_type -%}
            {%- when 'text' -%}
              <div class="contact-form__input-group">
                <label
                  for="{{ field_id }}"
                  class="contact-form__label body"
                >
                  {{ field_title -}}
                  {%- if is_required == true %} *{% endif %}
                </label>
                <input
                  type="text"
                  id="{{ field_id }}"
                  name="contact[{{- field_name -}}]"
                  class="contact-form__input"
                  placeholder="{{ field_placeholder }}"
                  {% unless field_value_maxlength == blank %}
                    maxlength="{{ field_value_maxlength }}"
                  {% endunless %}
                  {% if is_required == true %}
                    required
                  {% endif %}
                >
              </div>

            {%- when 'textarea' -%}
              <div class="contact-form__input-group">
                <label
                  for="{{ field_id }}"
                  class="contact-form__label body"
                >
                  {{ field_title -}}
                  {%- if is_required == true %} *{% endif %}
                </label>
                <textarea
                  name="contact[{{- field_name -}}]"
                  id="{{ field_id }}"
                  class="contact-form__textarea"
                  placeholder="{{ field_placeholder }}"
                  {% unless field_value_maxlength == blank %}
                    maxlength="{{ field_value_maxlength }}"
                  {% endunless %}
                  rows="{{ rows | default: 5 }}"
                  {% if is_required == true %}
                    required
                  {% endif -%}
                ></textarea>
              </div>

            {%- when 'email' -%}
              <div class="contact-form__input-group">
                <label
                  for="{{ field_id }}"
                  class="contact-form__label body"
                >
                  {{ field_title }} *
                </label>
                <input
                  type="email"
                  id="{{ field_id }}"
                  name="contact[email]"
                  class="contact-form__input"
                  placeholder="{{ field_placeholder }}"
                  {% unless field_value_maxlength == blank %}
                    maxlength="{{ field_value_maxlength }}"
                  {% endunless %}
                  required
                >
              </div>

            {%- when 'paragraph' -%}
              <div class="body">
                {{ field_text }}
              </div>

            {%- when 'checkbox' -%}
              <div class="contact-form__input-group">
                <label
                  class="contact-form__checkbox-label body"
                  for="{{ field_id }}"
                >
                  <input
                    type="checkbox"
                    id="{{ field_id }}"
                    name="contact[{{- field_name -}}]"
                    class="contact-form__checkbox"
                    {% if is_required == true %}
                      required
                    {% endif %}
                  >
                  {{ field_title -}}
                  {%- if is_required == true %} *{% endif %}
                </label>
              </div>
          {%- endcase -%}
        {% endfor %}

        <div class="contact-form__input-group">
          <button type="submit" class="contact-form__button body">
            {{ button_label | default: 'Submit' }}
          </button>
        </div>
        {% if form.posted_successfully? %}
          <p class="contact-form__success heading--l">Thanks for your enquiry!</p>
        {% else %}
          <p class="contact-form__error heading--l">
            {{ form.errors | default_errors }}
          </p>
        {% endif %}
      {% endform %}
    </div>
  </div>
</div>

<script
  src="{{ "section-contact-form.js" | asset_url }}"
  defer
></script>

{% schema %}
{
  "name": "Contact Form",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Get in Touch"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "We'd love to hear from you. Send us a message and we'll respond as soon as possible."
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "Submit"
    }
  ],
  "blocks": [
    {
      "type": "text",
      "name": "Text Field",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Label",
          "default": "Name",
          "info": "Display a label for the field."
        },
        {
          "type": "text",
          "id": "name",
          "label": "Input Name",
          "default": "name",
          "info": "This is the name of the field."
        },
        {
          "type": "number",
          "id": "maxlength",
          "label": "Max Length",
          "default": 128,
          "info": "Leave blank to have no max length."
        },
        {
          "type": "checkbox",
          "id": "required",
          "label": "Required",
          "default": false
        },
        {
          "type": "text",
          "id": "placeholder",
          "label": "Placeholder",
          "info": "Add additional instructions with a placeholder."
        }
      ]
    },
    {
      "type": "textarea",
      "name": "Textarea",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Label",
          "default": "Message",
          "info": "Display a label for the field."
        },
        {
          "type": "text",
          "id": "name",
          "label": "Input Name",
          "default": "body",
          "info": "This is the name of the field. Default is 'body'."
        },
        {
          "type": "number",
          "id": "maxlength",
          "label": "Max Length",
          "default": 500,
          "info": "Leave blank to have no max length."
        },
        {
          "type": "number",
          "id": "rows",
          "label": "Rows",
          "default": 5
        },
        {
          "type": "checkbox",
          "id": "required",
          "label": "Required",
          "default": false
        },
        {
          "type": "text",
          "id": "placeholder",
          "label": "Placeholder",
          "info": "Add additional instructions with a placeholder."
        }
      ]
    },
    {
      "type": "email",
      "name": "Email Field",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Label",
          "default": "Email",
          "info": "Display a label for the field."
        },
        {
          "type": "number",
          "id": "maxlength",
          "label": "Max Length",
          "default": 128,
          "info": "Leave blank to have no max length."
        },
        {
          "type": "text",
          "id": "placeholder",
          "label": "Placeholder",
          "info": "Add additional instructions with a placeholder.",
          "default": "e.g. steve@example.com"
        }
      ]
    },
    {
      "type": "checkbox",
      "name": "Checkbox",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Label",
          "default": "I agree to the terms and conditions",
          "info": "Display a label for the field."
        },
        {
          "type": "text",
          "id": "name",
          "label": "Input Name",
          "default": "terms_agreement",
          "info": "This is the name of the field."
        },
        {
          "type": "checkbox",
          "id": "required",
          "label": "Required",
          "default": false
        }
      ]
    },
    {
      "type": "paragraph",
      "name": "Paragraph",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Complete the form below to send us a message.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Contact Form",
      "blocks": [
        {
          "type": "text",
          "settings": {
            "title": "Name",
            "name": "name",
            "required": true
          }
        },
        {
          "type": "email",
          "settings": {
            "title": "Email"
          }
        },
        {
          "type": "textarea",
          "settings": {
            "title": "Message",
            "name": "body",
            "required": true
          }
        }
      ]
    }
  ]
}
{% endschema %}
