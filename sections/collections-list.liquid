{{ 'section-collections-list.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign collections_per_page = 16
-%}

<div class="collections-list">
  <div class="collections-list__heading">
    <h1 class="heading--xl">{{ section.settings.heading | default: 'All Collections' }}</h1>
  </div>

  <div class="collections-list__grid">
    {%- paginate collections by collections_per_page -%}
      {%- for collection in collections -%}
        <article class="collections-list__card">
          <a href="{{ collection.url }}" class="collections-list__card-image">
            {%- if collection.featured_image -%}
              {{
                collection.featured_image
                | image_url: width: 850
                | image_tag:
                  loading: 'lazy',
                  alt: collection.title,
                  widths: '400, 600, 800, 1000, 1200, 1400',
                  sizes: '(max-width: 570px) 100vw, (max-width: 1440px) 50vw, 25vw'
              }}
            {%- else -%}
              <div class="collections-list__card-placeholder">
                {{ 'collection-1' | placeholder_svg_tag }}
              </div>
            {%- endif -%}
          </a>

          <div class="collections-list__card-content">
            <h2 class="collections-list__card-title">
              <a class="heading--l" href="{{ collection.url }}">{{ collection.title }}</a>
            </h2>

            <a href="{{ collection.url }}" class="collections-list__card-link-container">
              <span class="collections-list__card-link body">
                View Collection
                {%- render '_icon-arrow-submit-dark' -%}
              </span>
            </a>
          </div>
        </article>
      {%- endfor -%}

      {%- if paginate.pages > 1 -%}
        <div class="collections-list__pagination">
          {%- for part in paginate.parts -%}
            {%- if part.is_link -%}
              <a href="{{ part.url }}" class="collections-list__pagination-link body">{{ part.title }}</a>
            {%- else -%}
              <span class="collections-list__pagination-current body">{{ part.title }}</span>
            {%- endif -%}
          {%- endfor -%}
        </div>
      {%- endif -%}
    {%- endpaginate -%}
  </div>
</div>

{% schema %}
{
  "name": "Collections List",
  "limit": 1,
  "tag": "section",
  "class": "collections-list-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "All Collections",
      "info": "Heading for the collections page"
    }
  ]
}
{% endschema %}