<style>
  .featured-article {
    padding: var(--space-2xl) 0;
    overflow: hidden;
    border-bottom: 1px solid var(--neutral-50);
  }

  .featured-article__heading {
    margin-bottom: var(--space-l);
    padding: 0 var(--space-m);
    color: var(--neutral-950);
  }

  .featured-article__heading--left {
    text-align: left;
  }

  .featured-article__heading--center {
    text-align: center;
  }

  .featured-article__heading--right {
    text-align: right;
  }

  .featured-article__slider-wrapper {
    overflow: visible;
    width: 100vw;
    margin-left: calc(-50vw + 50%);
  }

  .featured-article__slide .featured-article__title,
  .featured-article__slide .featured-article__read-more {
    padding-left: var(--space-m);
  }

  .featured-article__slider {
    width: 100%;
  }

  .featured-article__card-link {
    display: block;
    text-decoration: none;
    color: var(--neutral-950);
  }

  .featured-article__image-wrapper {
    margin-bottom: var(--space-xs);
    overflow: hidden;
    background-color: var(--neutral-50);
  }

  .featured-article__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .featured-article__title {
    margin: var(--space-xs) 0 var(--space-2xs);
    padding-left: var(--space-m);
    color: var(--neutral-950);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .featured-article__read-more {
    display: inline-flex;
    align-items: center;
    gap: var(--space-3xs);
    padding-left: var(--space-m);
    color: var(--neutral-950);
  }

  .splide__arrows {
    display: none;
  }

  @media screen and (max-width: 768px) {
    .featured-article {
      padding: var(--space-xl) 0;
    }

    .featured-article__slider {
      padding: 0 var(--space-m);
    }

    .featured-article__title,
    .featured-article__read-more {
      padding-left: 0px !important;
    }

    .splide__arrows {
      display: flex;
      gap: var(--space-m);
      margin-bottom: var(--space-s);
    }
  }

  @media screen and (max-width: 470px) {
    .featured-article__slider-wrapper {
      overflow: hidden;
    }
  }
</style>

<div class="featured-article" id="section-{{ section.id }}">
  {% if section.settings.heading != blank %}
    <h2 class="heading--xl featured-article__heading featured-article__heading--{{ section.settings.heading_alignment }}">
      {{ section.settings.heading }}
    </h2>
  {% endif %}

  <div class="featured-article__slider-wrapper">
    <div class="featured-article__slider splide">
      <div class="splide__arrows">
        <button class="splide__arrow splide__arrow--prev">{% render '_icon-arrow-see-less' %}</button>
        <button class="splide__arrow splide__arrow--next">{% render '_icon-arrow-see-more' %}</button>
      </div>
      <div class="splide__track">
        <div class="splide__list">
          {% for article in blogs['the-jackson-journal'].articles limit: 100 %}
            {% if article.metafields.custom.featured_article == true %}
              <article class="splide__slide featured-article__slide">
                <a href="{{ article.url }}" class="featured-article__card-link">
                  {% if article.image %}
                    <div class="featured-article__image-wrapper">
                      <img
                        src="{{ article.image | image_url: width: 600 }}"
                        alt="{{ article.image.alt | escape }}"
                        loading="lazy"
                        width="{{ article.image.width }}"
                        height="{{ article.image.height }}"
                        class="featured-article__image"
                        decoding="async"
                      >
                    </div>
                  {% endif %}
                  <h3 class="heading--l featured-article__title">{{ article.title }}</h3>
                  <span class="body featured-article__read-more">
                    Read More
                    {% render '_icon-arrow-submit-dark' %}
                  </span>
                </a>
              </article>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const splideElement = document.querySelector('.featured-article__slider');

    if (splideElement) {
      new Splide(splideElement, {
        type: 'loop',
        perPage: 4.5,
        perMove: 1,
        gap: 'var(--space-2xs)',
        arrows: false,
        pagination: false,
        drag: true,
        snap: true,
        breakpoints: {
          1200: {
            perPage: 3,
            arrows: true,
          },
          768: {
            perPage: 2,
            arrows: true,
          },
          470: {
            perPage: 1,
            arrows: true,
          },
        },
      }).mount();
    }
  });
</script>

{% schema %}
{
  "name": "Featured Articles",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured Articles"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading Alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    }
  ],
  "presets": [
    {
      "name": "Featured Articles",
      "category": "Blog"
    }
  ]
}
{% endschema %}
