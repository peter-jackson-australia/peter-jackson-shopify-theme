<style>
  .menu-drawer {
    border-top: none;
  }

  .article-header {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
    padding: var(--space-2xl) var(--space-m);
    display: flex;
    flex-direction: column;
    gap: var(--space-m);
  }

  .article-header__tags {
    margin: 0 auto;
    color: var(--neutral-600);
  }

  .article-header__tag {
    color: var(--neutral-600);
    text-decoration: none;
  }

  .article-content hr {
    border: 0;
    height: 1px;
    background-color: var(--neutral-200);
    margin: 0 auto;
    width: 75%;
  }

  .article-header__title {
    color: var(--neutral-950);
  }

  .article-header__excerpt {
    color: var(--neutral-600);
  }

  .article-header__meta {
    color: var(--neutral-600);
  }

  .article-header__image img {
    width: 100%;
    height: auto;
    object-fit: cover;
    display: block;
  }

  .article-content {
    max-width: 700px;
    margin: 0 auto;
    text-align: left;
    padding: 0px var(--space-m);
    padding-bottom: calc(var(--space-2xl) - var(--space-m));
  }

  .article-content p,
  .article-content ul,
  .article-content ol,
  .article-content a {
    color: var(--neutral-600);
  }

  .article-content strong {
    color: var(--neutral-950);
    font-family: var(--ordinary-regular);
    font-weight: 500;
  }

  .article-content h1,
  .article-content h2,
  .article-content h3,
  .article-content h4,
  .article-content h5,
  .article-content h6 {
    color: var(--neutral-950);
  }

  .article-related {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-bottom: var(--space-2xl);
    border-bottom: 1px solid var(--neutral-50);
    border-top: 1px solid var(--neutral-50);
  }

  .article-related__content {
    display: flex;
    padding: var(--space-2xl) var(--space-m);
    gap: var(--space-xl);
    border-top: 1px solid var(--neutral-50);
  }

  .article-related__header {
    display: flex;
    align-items: center;
    flex: 1;
  }

  .article-related__title {
    padding-right: var(--space-m);
    color: var(--neutral-950);
    white-space: nowrap;
    margin: 0 auto;
    padding: var(--space-2xl) 0px;
  }

  .article-related__divider {
    height: 50px;
    width: 1px;
    background-color: var(--neutral-200);
  }

  .article-related__subtitle {
    padding-left: var(--space-m);
    color: var(--neutral-950);
    margin-top: -7px;
  }

  .article-related__description {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: end;
    gap: var(--space-m);
  }

  .article-related__text {
    color: var(--neutral-600);
    max-width: 80ch;
    text-align: right;
  }

  .article-related__link {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    color: var(--neutral-950);
    text-decoration: none;
  }

  .article-related__posts {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: var(--space-2xs);
  }

  .article-related__post {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
    overflow: hidden;
  }

  .article-related__post-image {
    display: block;
    width: 100%;
    overflow: hidden;
    margin-bottom: var(--space-xs);
  }

  .article-related__post-image img {
    width: 100%;
    object-fit: cover;
  }

  .article-related__post-content {
    padding-left: var(--space-m);
  }

  .article-related__post-category {
    color: var(--neutral-600);
    text-transform: uppercase;
    margin-bottom: var(--space-s);
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  .article-related__post-title {
    margin-bottom: var(--space-2xs);
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  .article-related__post-title a,
  .article-related__post-link-container {
    color: var(--neutral-950);
    text-decoration: none;
  }

  .article-related__post-link {
    display: flex;
    gap: var(--space-xs);
  }

  .leading-letter {
    color: var(--neutral-950);
    font-size: clamp(2.986rem, 2.8367rem + 0.7465vw, 3.7325rem);
    float: left;
    line-height: 0.8;
    margin-right: var(--space-xs);
    font-weight: 500;
    font-family: var(--ordinary-regular);
  }

  .article-content blockquote,
  .article-content blockquote *,
  .article-content blockquote > *,
  .article-content blockquote > * > *,
  .article-content blockquote > * > * > * {
    line-height: 140%;
    font-family: var(--ordinary-regular);
    font-size: clamp(1rem, 0.95rem + 0.25vw, 1.25rem);
    font-weight: 500;
    text-align: center;
    position: relative;
    color: var(--neutral-950);
  }

  .article-content blockquote::before {
    content: '';
    width: 128px;
    height: 128px;
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M23.105,55.627c-0.005,0.138-0.021,0.273-0.021,0.413c0,0.047,0.006,0.092,0.007,0.138 c-0.001,0.092-0.007,0.183-0.007,0.275l0.02-0.014c0.212,6.166,5.265,11.103,11.482,11.103c6.352,0,11.502-5.149,11.502-11.502 c0-5.796-4.292-10.577-9.869-11.372c1.386-4.595,5.645-7.938,10.695-7.938v-4.106C34.021,32.625,23.541,42.841,23.105,55.627z" fill="%23f3f3f3"/><path d="M52.941,55.627c-0.005,0.138-0.021,0.273-0.021,0.413c0,0.047,0.007,0.092,0.007,0.138 c-0.001,0.092-0.007,0.183-0.007,0.275l0.021-0.014c0.212,6.166,5.265,11.103,11.481,11.103c6.353,0,11.502-5.149,11.502-11.502 c0-5.796-4.292-10.577-9.869-11.372c1.386-4.595,5.645-7.938,10.694-7.938v-4.106C63.856,32.625,53.378,42.841,52.941,55.627z" fill="%23f3f3f3"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    position: absolute;
    top: -64px;
    left: -56px;
    z-index: -1;
  }

  @media screen and (max-width: 1440px) {
    .article-related {
      padding-top: var(--space-xl);
      padding-bottom: var(--space-xl);
    }

    .article-related__content {
      padding-top: var(--space-xl);
      padding-bottom: var(--space-xl);
      flex-direction: column;
      gap: var(--space-m);
    }

    .article-related__header {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-m);
    }

    .article-related__description {
      align-items: start;
    }

    .article-related__text {
      text-align: left;
    }

    .article-related__title {
      padding-right: 0;
    }

    .article-related__divider {
      display: none;
    }

    .article-related__subtitle {
      padding-left: 0px;
    }

    .article-related__posts {
      grid-template-columns: repeat(3, 1fr);
      gap: calc(var(--space-xs) + var(--space-xs));
      column-gap: var(--space-2xs);
    }

    .article-related__post-content {
      padding-right: var(--space-m);
    }
  }

  .article-navigation {
    width: 100%;
    padding: var(--space-l) var(--space-m);
  }

  .article-navigation__container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
  }

  .article-navigation__previous,
  .article-navigation__next {
    flex: 1;
  }

  .article-navigation__previous {
    text-align: left;
  }

  .article-navigation__current {
    flex: 1;
    text-align: center;
    color: var(--neutral-950);
  }

  .article-navigation__next {
    text-align: right;
  }

  .article-navigation__label {
    display: block;
    margin-bottom: var(--space-2xs);
  }

  .article-navigation__link {
    color: var(--neutral-600);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
  }

  .article-navigation__arrow {
    display: inline-flex;
    align-items: center;
    flex-shrink: 0;
  }

  .article-navigation__arrow--prev {
    transform: rotate(180deg);
    margin-right: var(--space-xs);
  }

  .article-navigation__arrow--next {
    margin-left: var(--space-xs);
  }

  @media screen and (max-width: 768px) {
    .article-navigation {
      padding: var(--space-m);
    }

    .article-navigation__container {
      gap: var(--space-xs);
      flex-direction: column;
      text-align: center !important;
      justify-content: center;
    }

    .article-navigation__previous,
    .article-navigation__current,
    .article-navigation__next {
      text-align: center;
      min-width: 0;
      overflow: hidden;
    }

    .article-navigation__label,
    .article-navigation__link-text,
    .article-navigation__current {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .article-navigation__arrow--prev {
      margin-right: var(--space-3xs);
    }

    .article-navigation__arrow--next {
      margin-left: var(--space-3xs);
    }

    .article-content blockquote::before {
      width: 80px;
      height: 80px;
      top: -32px;
      left: -32px;
    }
  }

  @media screen and (max-width: 570px) {
    .article-related__posts {
      grid-template-columns: 1fr;
      gap: calc(var(--space-xs) + var(--space-xs));
    }
  }
</style>

{% liquid
  assign image_width = 800
  assign image_height = image_width | divided_by: article.image.aspect_ratio | ceil
%}

<section id="{{ section.id }}" class="section-wrap">
  <article class="section">
    <header class="article-header">
      <h1 class="article-header__title heading--2xl">{{ article.title }}</h1>

      {% if article.excerpt != blank %}
        <div class="article-header__excerpt body">
          {{ article.excerpt }}
        </div>
      {% endif %}

      <div class="article-header__meta">
        <p class="small">{{ article.published_at | date: '%b %d, %Y' }}</p>
      </div>

      {% if article.tags.size > 0 %}
        <div class="article-header__tags">
          <p class="small">
            {% liquid
              if article.tags.size > 1
                assign display_tag = article.tags[1]
              else
                assign display_tag = article.tags[0]
              endif
            %}
            <a
              href="/pages/the-empowered-mind?tag={{ display_tag | url_encode }}#blog-collection"
              class="article-header__tag body--uppercase"
            >
              {{- display_tag -}}
            </a>
          </p>
        </div>
      {% endif %}

      {% liquid
        assign hero_image = article.metafields.custom.blog_landscape_hero_image
        assign display_image = hero_image | default: article.image
      %}

      {% if display_image %}
        <div class="article-header__image">
          <img
            src="{{ display_image | image_url: width: image_width }}"
            width="{{ image_width }}"
            height="{{ image_height }}"
            alt="{{ article.title | escape }}"
            loading="lazy"
          >
        </div>
      {% endif %}
    </header>
    <div class="article-content">
      {{ article.content }}
    </div>
    <div class="article-related">
      <div class="article-related__header">
        <h2 class="article-related__title heading--2xl">More From The Empowered Mind</h2>
      </div>

      <div class="article-related__posts">
        {% assign displayed_count = 0 %}
        {% for related_article in blogs['the-jackson-journal'].articles limit: 100 %}
          {% if displayed_count >= 6 %}
            {% break %}
          {% endif %}

          {% if related_article.tags.first == 'Lifestyle' and related_article.id != article.id %}
            <article class="article-related__post">
              {% if related_article.image %}
                <a href="{{ related_article.url }}" class="article-related__post-image">
                  {{
                    related_article.image
                    | image_url: width: 800
                    | image_tag: loading: 'lazy', alt: related_article.title
                  }}
                </a>
              {% endif %}

              <div class="article-related__post-content">
                {% if related_article.tags.size > 0 %}
                  <div class="article-related__post-category small">{{ related_article.tags.first }}</div>
                {% endif %}

                <h3 class="article-related__post-title heading--l">
                  <a href="{{ related_article.url }}">{{ related_article.title }}</a>
                </h3>

                <a href="{{ related_article.url }}" class="article-related__post-link-container">
                  <span class="article-related__post-link body"
                    >Read Article {% render '_icon-arrow-submit-dark' -%}
                  </span>
                </a>
              </div>
            </article>
            {% assign displayed_count = displayed_count | plus: 1 %}
          {% endif %}
        {% endfor %}
      </div>
    </div>
    {%- liquid
      assign current_article = article
      assign current_blog = blog
      assign all_articles = current_blog.articles
      assign prev_article = null
      assign next_article = null
      assign current_index = -1
      for i in (0..all_articles.size)
        assign article_at_index = all_articles[i]
        if article_at_index.id == current_article.id
          assign current_index = i
          break
        endif
      endfor

      if current_index > 0
        assign next_index = current_index | minus: 1
        assign next_article = all_articles[next_index]
      endif

      assign max_index = all_articles.size | minus: 1
      if current_index < max_index
        assign prev_index = current_index | plus: 1
        assign prev_article = all_articles[prev_index]
      endif
    -%}

    <div class="article-navigation">
      <div class="article-navigation__container">
        <div class="article-navigation__previous">
          {% if prev_article %}
            <span class="article-navigation__label body--uppercase">Previous</span>
            <a
              href="{{ prev_article.url }}"
              class="article-navigation__link body--uppercase"
              title="            {{- prev_article.title -}}"
            >
              <span class="article-navigation__arrow article-navigation__arrow--prev">
                {% render '_icon-arrow-submit-dark' %}
              </span>
              <span class="article-navigation__link-text">{{ prev_article.title }}</span>
            </a>
          {% endif %}
        </div>

        <div class="article-navigation__current heading--l">
          {% render 'breadcrumb' %}
        </div>

        <div class="article-navigation__next">
          {% if next_article %}
            <span class="article-navigation__label body--uppercase">Next</span>
            <a
              href="{{ next_article.url }}"
              class="article-navigation__link body--uppercase"
              title="            {{- next_article.title -}}"
            >
              <span class="article-navigation__link-text">{{ next_article.title }}</span>
              <span class="article-navigation__arrow article-navigation__arrow--next">
                {% render '_icon-arrow-submit-dark' %}
              </span>
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  </article>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const articleContent = document.querySelector('.article-content');
    if (articleContent) {
      const firstParagraph = articleContent.querySelector('p');
      if (firstParagraph && firstParagraph.textContent.trim()) {
        const text = firstParagraph.innerHTML;
        const firstChar = firstParagraph.textContent.trim()[0];
        const charIndex = text.indexOf(firstChar);

        if (charIndex >= 0) {
          const newHtml =
            text.substring(0, charIndex) +
            '<span class="leading-letter">' +
            firstChar +
            '</span>' +
            text.substring(charIndex + 1);
          firstParagraph.innerHTML = newHtml;
        }
      }
    }
  });
</script>

{% schema %}
{
  "name": "Article",
  "tag": "section",
  "class": "section"
}
{% endschema %}
