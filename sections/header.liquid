<div
  id="site-header"
  class="header container"
  onclick="window.closeMenu(); window.closeFilter && window.closeFilter();"
>
  <div class="header__left">
    <button
      type="button"
      class="hamburger-menu"
      onclick="event.stopPropagation(); window.toggleNav();"
      aria-expanded="false"
      aria-controls="site-navigation"
      aria-label="Toggle menu"
    >
      <div class="hamburger-icon">
        {% render '_icon-hamburger-menu', accessible_name: 'Menu' %}
      </div>
    </button>
    
    <button
      type="button"
      class="header__search-mobile"
      onclick="window.toggleSearch();"
      aria-label="Search"
      style="background: none; border: none; padding: 0; cursor: pointer; display: flex; align-items: center; justify-content: center;"
    >
      {% render '_icon-site-search', accessible_name: 'Search', role: 'img' %}
    </button>
  </div>
  <div class="header__logo">
    <a href="{{ routes.root_url }}" aria-label="Peter Jackson - Home">
      {% render '_icon-peter-jackson', accessible_name: 'Peter Jackson', role: 'img' %}
    </a>
  </div>
  <ul class="header__icons">
    <li class="header__search-desktop">
      <button
        type="button"
        onclick="window.toggleSearch();"
        aria-label="Search"
        style="background: none; border: none; padding: 0; cursor: pointer; display: flex; align-items: center; justify-content: center;"
      >
        {% render '_icon-site-search', accessible_name: 'Search', role: 'img' %}
      </button>
    </li>
    
    <li>
      <localization-form>
        {% form 'localization' %}
          <div class="disclosure">
            <button type="button" class="disclosure__button" aria-expanded="false" aria-controls="CountryList">
              {{ localization.country.name }} ({{ localization.country.currency.iso_code }} {{ localization.country.currency.symbol }})
            </button>
            
            <ul id="CountryList" role="list" class="disclosure__list" hidden>
              {% for country in localization.available_countries %}
                <li class="disclosure__item" tabindex="-1">
                  <a {% if country.iso_code == localization.country.iso_code %} aria-current="true"{% endif %} data-value="{{ country.iso_code }}">
                    {{ country.name }} ({{ country.currency.iso_code }} {{ country.currency.symbol }})
                  </a>
                </li>
              {% endfor %}
            </ul>
            
            <input type="hidden" name="country_code" value="{{ localization.country.iso_code }}" />
          </div>
        {% endform %}
      </localization-form>
    </li>
    
    <li>
      <a href="{{ routes.account_url }}" aria-label="Account">
        {% render '_icon-account', accessible_name: 'Account', role: 'img' %}
      </a>
    </li>
    <li>
      <button
        type="button"
        onclick="window.openCart();"
        aria-label="Cart{% if cart.item_count > 0 %} with items{% endif %}"
        style="background: none; border: none; padding: 0; cursor: pointer; text-decoration: none; position: relative;"
      >
        {%- render '_icon-cart', accessible_name: 'Shopping Cart', role: 'img' %}
        <span class="cart-count-indicator {% if cart.item_count == 0 %}hide{% endif %}" aria-hidden="true"></span>
      </button>
    </li>
  </ul>
</div>
<div id="header-spacer" class="hide"></div>
  
{% render 'menu', id: 'site-navigation' %}

<script
  src="{{ "header.js" | asset_url }}"
  defer
/>
