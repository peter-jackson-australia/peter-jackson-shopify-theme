{% comment %}
  Blog Hero Section
{% endcomment %}

<style>
  .blog-hero {
    display: flex;
    flex-direction: column;
    padding-bottom: var(--space-2xl);
  }

  .blog-hero__content {
    display: flex;
    padding: var(--space-2xl) var(--space-m);
    gap: var(--space-xl);
    justify-content: space-between;
  }

  .blog-hero__content-header {
    flex: 1;
    display: flex;
    align-items: center;
  }

  .blog-hero__content-title {
    padding-right: var(--space-m);
    color: var(--neutral-950);
    white-space: nowrap;
  }

  .blog-hero__content-divider {
    height: 50px;
    width: 1px;
    background-color: var(--neutral-200);
  }

  .blog-hero__content-subtitle {
    padding-left: var(--space-m);
    color: var(--neutral-950);
    margin-top: -7px;
  }

  .blog-hero__content-description {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: end;
    gap: var(--space-m);
  }

  .blog-hero__content-text {
    color: var(--neutral-600);
    max-width: 80ch;
    text-align: right;
  }

  .blog-hero__content-link {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    color: var(--neutral-950);
    text-decoration: none;
  }

  .blog-hero__image {
    position: relative;
    margin-bottom: var(--space-2xs);
  }

  .blog-hero__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: top;
  }

  .blog-hero__image-content {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    z-index: 3;
    padding: var(--space-m);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    color: var(--white);
  }

  .blog-hero__image-header {
    flex: 1;
    padding-right: var(--space-l);
  }

  .blog-hero__image-description-container {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
  }

  .blog-hero__image-description {
    color: var(--white);
    max-width: 100%;
    text-align: right;
  }

  .blog-hero__image-link {
    display: inline-flex;
    align-items: center;
    text-decoration: none;
    color: var(--white);
    gap: var(--space-xs);
    margin-left: auto;
  }

  .blog-hero__posts {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: var(--space-2xs);
  }

  .blog-hero__post {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
    overflow: hidden;
  }

  .blog-hero__post-image-link {
    margin-bottom: var(--space-xs);
  }

  .blog-hero__post-image {
    width: 100%;
    object-fit: cover;
  }

  .blog-hero__post-content {
    padding-left: var(--space-m);
  }

  .blog-hero__post-category {
    color: var(--neutral-600);
    text-transform: uppercase;
    margin-bottom: var(--space-s);
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  .blog-hero__post-title {
    margin-bottom: var(--space-2xs);
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  .blog-hero__post-title a {
    color: var(--neutral-950);
    text-decoration: none;
  }

  .blog-hero__post-link-container {
    color: var(--neutral-950);
    text-decoration: none;
  }

  .blog-hero__post-link {
    display: flex;
    gap: var(--space-xs);
  }

  .blog-hero__slider-wrapper {
    display: none;
  }

  @media screen and (max-width: 1440px) {
    .blog-hero {
      padding-bottom: var(--space-xl);
    }

    .blog-hero__content {
      padding-top: var(--space-xl);
      padding-bottom: var(--space-xl);
      flex-direction: column;
      gap: var(--space-m);
    }

    .blog-hero__content-header {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-m);
    }

    .blog-hero__content-title {
      padding-right: 0;
    }

    .blog-hero__content-subtitle {
      padding-left: 0px;
    }

    .blog-hero__content-divider {
      display: none;
    }

    .blog-hero__content-description {
      align-items: start;
    }

    .blog-hero__content-text {
      text-align: left;
    }

    .blog-hero__image-content {
      flex-direction: column;
      justify-content: end;
      gap: var(--space-m);
    }

    .blog-hero__image-header {
      flex: 0;
      padding-right: 0;
    }

    .blog-hero__image-description-container {
      display: flex;
      flex-direction: column;
      gap: var(--space-xs);
    }

    .blog-hero__image-description {
      text-align: left;
    }

    .blog-hero__image-link {
      margin-left: 0px;
    }

    .blog-hero__posts {
      grid-template-columns: repeat(3, 1fr);
      gap: calc(var(--space-xs) + var(--space-xs)) var(--space-2xs);
    }

    .blog-hero__post-content {
      padding-right: var(--space-m);
    }
  }

  @media screen and (max-width: 768px) {
    .blog-hero__posts {
      display: none;
    }

    .blog-hero__slider-wrapper {
      display: block;
      overflow: hidden;
      width: 100vw;
      margin-left: calc(-50vw + 50%);
    }

    .blog-hero__slider {
      width: 100%;
      padding: 0 var(--space-m);
    }

    .blog-hero__post-content {
      padding-left: 0;
      padding-right: 0;
    }

    .blog-hero__post-title {
      width: calc(100% - var(--space-m));
    }
  }

  @media screen and (max-width: 570px) {
    .blog-hero__image {
      height: 60vh;
      order: -1;
      margin-top: var(--space-xl);
    }

    .blog-hero__image-content {
      padding-bottom: var(--space-l);
    }
  }
</style>

{% assign show_top_border = section.settings.show_top_border %}
{% assign show_bottom_border = section.settings.show_bottom_border %}

{% assign section_id = section.id %}
{% assign anchor_id = section.settings.anchor_id %}
{% assign heading = section.settings.heading %}
{% assign heading_anim = section.settings.heading_animation %}
{% assign subheading = section.settings.subheading %}
{% assign subheading_anim = section.settings.subheading_animation %}
{% assign description = section.settings.description %}
{% assign description_anim = section.settings.description_animation %}
{% assign cta_link = section.settings.cta_link %}
{% assign cta_text = section.settings.cta_text %}

{% assign hero_image = section.settings.hero_image %}
{% assign hero_image_mobile = section.settings.hero_image_mobile %}
{% assign image_heading = section.settings.image_heading %}
{% assign image_heading_animation = section.settings.image_heading_animation %}
{% assign image_description = section.settings.image_description %}
{% assign image_description_anim = section.settings.image_description_anim %}
{% assign image_link_url = section.settings.image_link_url %}
{% assign image_link_text = section.settings.image_link_text %}

{% assign show_recent_posts = section.settings.show_recent_posts %}
{% assign animate_posts = section.settings.animate_posts %}
{% assign show_image_overlay = section.settings.show_image_overlay %}

<div
  class="blog-hero"
  style="
    {% if show_top_border %}border-top: 1px solid var(--neutral-50);{% endif %}
    {% if show_bottom_border %}border-bottom: 1px solid var(--neutral-50);{% endif %}
  "
  id="section-{{ section_id }}"
  {% if anchor_id != blank %}
    id="{{ anchor_id | downcase | replace: ' ', '-' }}-segment"
  {% endif %}
>
  <div class="blog-hero__content">
    <div class="blog-hero__content-header">
      {% if heading != blank %}
        <h1 class="blog-hero__content-title heading--decorative {% if heading_anim != 'none' %}{{ heading_anim }}{% endif %}">
          {{ heading }}
        </h1>
      {% endif %}

      <span class="blog-hero__content-divider"></span>

      {% if subheading != blank %}
        <h2 class="blog-hero__content-subtitle heading--l {% if subheading_anim != 'none' %}{{ subheading_anim }}{% endif %}">
          {{ subheading }}
        </h2>
      {% endif %}
    </div>

    <div class="blog-hero__content-description">
      {% if description != blank %}
        <div class="blog-hero__content-text body {% if description_anim != 'none' %}{{ description_anim }}{% endif %}">
          {{ description }}
        </div>
      {% endif %}

      {% if cta_link != blank and cta_text != blank %}
        <a href="{{ cta_link }}" class="blog-hero__content-link body">
          {{ cta_text }}
          {% render '_icon-arrow-submit-dark' %}
        </a>
      {% endif %}
    </div>
  </div>

  {% if hero_image != blank %}
    <div class="blog-hero__image">
      <picture>
        {% if hero_image_mobile != blank %}
          <source
            media="(max-width: 767px)"
            srcset="
              {{ hero_image_mobile | image_url: width: 400 }} 1x,
              {{ hero_image_mobile | image_url: width: 800 }} 2x
            "
          >
        {% endif %}

        {{
          section.settings.hero_image
          | image_url: width: 1920
          | image_tag:
            loading: 'lazy',
            decoding: 'async',
            alt: heading,
            class: 'blog-hero__image-img',
            widths: '400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000, 2400, 3000',
            sizes: '(max-width: 400px) 400px, (max-width: 600px) 600px, (max-width: 800px) 800px, (max-width: 1000px) 1000px, (max-width: 1200px) 1200px, (max-width: 1400px) 1400px, (max-width: 1600px) 1600px, (max-width: 1800px) 1800px, (max-width: 2000px) 2000px, (max-width: 2400px) 2400px, 100vw'
        }}
      </picture>

      {% if show_image_overlay %}
        <div class="blog-hero__image-content">
          <div class="blog-hero__image-header">
            {% if image_heading != blank %}
              <h2 class="heading--l {% if image_heading_animation != 'none' %}{{ image_heading_animation }}{% endif %}">
                {{ image_heading }}
              </h2>
            {% endif %}
          </div>

          <div class="blog-hero__image-description-container">
            {% if image_description != blank %}
              <div class="blog-hero__image-description body {% if image_description_anim != 'none' %}{{ image_description_anim }}{% endif %}">
                {{ image_description }}
              </div>
            {% endif %}

            {% if image_link_url != blank and image_link_text != blank %}
              <a href="{{ image_link_url }}" class="blog-hero__image-link body">
                {{ image_link_text }}
                {% render '_icon-arrow-submit-white' %}
              </a>
            {% endif %}
          </div>
        </div>
      {% endif %}
    </div>
  {% endif %}

  {% if show_recent_posts %}
    <div class="blog-hero__posts {% if animate_posts %}animate-container-cards-scroll{% endif %}">
      {%- assign blog = blogs[section.settings.blog] -%}
      {% for article in blog.articles limit: 6 %}
        <article class="blog-hero__post">
          {% if article.image %}
            <a href="{{ article.url }}" class="blog-hero__post-image-link">
              {{
                article.image
                | image_url: width: 850
                | image_tag:
                  loading: 'lazy',
                  decoding: 'async',
                  alt: article.title,
                  widths: '400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000, 2400, 3000',
                  sizes: '(max-width: 400px) 400px, (max-width: 600px) 600px, (max-width: 800px) 800px, (max-width: 1000px) 1000px, (max-width: 1200px) 1200px, (max-width: 1400px) 1400px, (max-width: 1600px) 1600px, (max-width: 1800px) 1800px, (max-width: 2000px) 2000px, (max-width: 2400px) 2400px, 100vw',
                  class: 'blog-hero__post-image'
              }}
            </a>
          {% endif %}

          <div class="blog-hero__post-content">
            {% if article.tags.size > 0 %}
              <div class="blog-hero__post-category small">{{ article.tags.first }}</div>
            {% endif %}

            <h3 class="blog-hero__post-title heading--l">
              <a href="{{ article.url }}">{{ article.title }}</a>
            </h3>

            <a href="{{ article.url }}" class="blog-hero__post-link-container">
              <span class="blog-hero__post-link body">Read Article {% render '_icon-arrow-submit-dark' %}</span>
            </a>
          </div>
        </article>
      {% endfor %}
    </div>

    <div class="blog-hero__slider-wrapper">
      <div class="blog-hero__slider splide">
        <div class="splide__arrows">
          <button class="splide__arrow splide__arrow--prev">{% render '_icon-arrow-see-less' %}</button>
          <button class="splide__arrow splide__arrow--next">{% render '_icon-arrow-see-more' %}</button>
        </div>
        <div class="splide__track">
          <ul class="splide__list">
            {%- assign blog = blogs[section.settings.blog] -%}
            {% for article in blog.articles limit: 6 %}
              <li class="splide__slide">
                <article class="blog-hero__post">
                  {% if article.image %}
                    <a href="{{ article.url }}" class="blog-hero__post-image">
                      {{
                        article.image
                        | image_url: width: 600
                        | image_tag: loading: 'lazy', decoding: 'async', alt: article.title
                      }}
                    </a>
                  {% endif %}

                  <div class="blog-hero__post-content">
                    {% if article.tags.size > 0 %}
                      <div class="blog-hero__post-category small">{{ article.tags.first }}</div>
                    {% endif %}

                    <h3 class="blog-hero__post-title heading--l">
                      <a href="{{ article.url }}">{{ article.title }}</a>
                    </h3>

                    <a href="{{ article.url }}" class="blog-hero__post-link-container">
                      <span class="blog-hero__post-link body"
                        >Read Article {% render '_icon-arrow-submit-dark' -%}
                      </span>
                    </a>
                  </div>
                </article>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const splideElement = document.querySelector('#section-{{ section.id }} .blog-hero__slider');

        if (splideElement && window.innerWidth <= 768) {
          new Splide(splideElement, {
            perPage: 1,
            type: 'loop',
            gap: 'var(--space-2xs)',
            arrows: true,
            pagination: false,
            drag: true,
            snap: true,
            autoWidth: false,
          }).mount();
        }
      });
    </script>
  {% endif %}
</div>

{% schema %}
{
  "name": "Blog Hero",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "anchor_id",
      "label": "Anchor ID (lowercase with hyphens)",
      "info": "Example: history or about-us"
    },
    {
      "type": "checkbox",
      "id": "show_top_border",
      "label": "Show top border",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_bottom_border",
      "label": "Show bottom border",
      "default": false
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero Image"
    },
    {
      "type": "image_picker",
      "id": "hero_image_mobile",
      "label": "Mobile Hero Image (optional)"
    },
    {
      "type": "header",
      "content": "Image Overlay Content"
    },
    {
      "type": "checkbox",
      "id": "show_image_overlay",
      "label": "Show Content Over Image",
      "default": true
    },
    {
      "type": "text",
      "id": "image_heading",
      "label": "Image Heading",
      "default": "Featured Article Title"
    },
    {
      "type": "select",
      "id": "image_heading_animation",
      "label": "Image Heading Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "text",
      "id": "image_description",
      "label": "Image Description",
      "default": "Description text for the featured article."
    },
    {
      "type": "select",
      "id": "image_description_animation",
      "label": "Image Description Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "text",
      "id": "image_link_text",
      "label": "Image Link Text",
      "default": "Read More"
    },
    {
      "type": "url",
      "id": "image_link_url",
      "label": "Image Link URL"
    },
    {
      "type": "header",
      "content": "Content Section"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "The Jackson Journal"
    },
    {
      "type": "select",
      "id": "heading_animation",
      "label": "Heading Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Heritage Meets Heritage"
    },
    {
      "type": "select",
      "id": "subheading_animation",
      "label": "Subheading Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default": "Some general information about the blog collection"
    },
    {
      "type": "select",
      "id": "description_animation",
      "label": "Description Animation",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "animate-word-slide-up-scroll",
          "label": "Slide Up Words"
        },
        {
          "value": "animate-word-rotate-scroll",
          "label": "Rotate In Words"
        },
        {
          "value": "animate-paragraph-slide-up-scroll",
          "label": "Slide Up"
        }
      ],
      "default": "none"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Link"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Text",
      "default": "Read Now"
    },
    {
      "type": "header",
      "content": "Blog Posts"
    },
    {
      "type": "checkbox",
      "id": "show_recent_posts",
      "label": "Show Recent Posts",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "animate_posts",
      "label": "Animate Blog Posts",
      "default": true,
      "info": "Adds a staggered fade-in animation to blog post cards"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Blog"
    }
  ],
  "presets": [
    {
      "name": "Blog Hero",
      "category": "Blog"
    }
  ],
  "enabled_on": {
    "templates": ["index", "page", "article"]
  }
}
{% endschema %}
