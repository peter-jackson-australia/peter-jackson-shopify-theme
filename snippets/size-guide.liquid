{{ 'snippet-size-guide.css' | asset_url | stylesheet_tag }}

{% liquid
  assign product_category_handle = product.category | handleize

  assign fit_chest_categories = 'coats-jackets,overcoats,pant-suits,pea-coats,polos,rain-coats,sport-jackets,sweaters,t-shirts,tuxedos,vests' | split: ','
  assign waist_categories = 'belts,cargo-pants,chinos,jeans,shorts,trousers' | split: ','
  assign shirt_categories = 'shirts' | split: ','

  assign show_size_guide = false
  assign category_type = ''

  if fit_chest_categories contains product_category_handle
    assign show_size_guide = true
    assign category_type = 'fit-chest'
  elsif waist_categories contains product_category_handle
    assign show_size_guide = true
    assign category_type = 'waist'
  elsif shirt_categories contains product_category_handle
    assign show_size_guide = true
    assign category_type = 'shirt'
  endif
%}

{% if show_size_guide %}
  <div
    class="size-guide"
    data-category-type="{{ category_type }}"
    data-unit-system="{{ localization.country.unit_system }}"
  >
    <div class="size-guide__header">
      <h3 class="size-guide__title heading--xl">Find Your Size</h3>
      <button type="button" class="size-guide__close modal-close">
        {% render '_icon-close' %}
      </button>
    </div>

    <div class="size-guide__progress">
      <div class="size-guide__progress-bar"></div>
    </div>

    <div class="size-guide__content">
      {% if category_type == 'fit-chest' %}
        <div class="size-guide__step" data-step="method">
          <p class="size-guide__question heading--l">How would you like to find your size?</p>
          <div class="size-guide__options">
            <button type="button" class="size-guide__option" data-method="easy">
              <span class="size-guide__option-title body--bold">Quick Estimate</span>
              <span class="size-guide__option-desc small">Using your height and weight</span>
            </button>
            <button type="button" class="size-guide__option" data-method="accurate">
              <span class="size-guide__option-title body--bold">Precise Fit</span>
              <span class="size-guide__option-desc small">Using your height and chest measurement</span>
            </button>
          </div>
        </div>

        <div class="size-guide__step" data-step="height">
          <p class="size-guide__question heading--l">What is your height?</p>
          <div class="size-guide__input-group" data-unit="metric">
            <label for="size-guide-height-cm" class="size-guide__label body">Height</label>
            <div class="size-guide__input-wrapper">
              <input
                type="number"
                id="size-guide-height-cm"
                class="size-guide__input body"
                step="1"
                min="155"
                max="201"
                placeholder="175"
              >
              <span class="size-guide__unit body">cm</span>
            </div>
            <span class="size-guide__hint small">Between 155cm and 201cm</span>
            <span class="size-guide__error small"></span>
          </div>
          <div class="size-guide__input-group" data-unit="imperial">
            <label class="size-guide__label body">Height</label>
            <div class="size-guide__input-row">
              <div class="size-guide__input-wrapper">
                <input
                  type="number"
                  id="size-guide-height-feet"
                  class="size-guide__input body"
                  min="5"
                  max="6"
                  placeholder="5"
                >
                <span class="size-guide__unit body">ft</span>
              </div>
              <div class="size-guide__input-wrapper">
                <input
                  type="number"
                  id="size-guide-height-inches"
                  class="size-guide__input body"
                  step="1"
                  min="0"
                  max="11"
                  placeholder="10"
                >
                <span class="size-guide__unit body">in</span>
              </div>
            </div>
            <span class="size-guide__hint small">Between 5'1" and 6'7"</span>
            <span class="size-guide__error small"></span>
          </div>
        </div>

        <div class="size-guide__step" data-step="weight">
          <p class="size-guide__question heading--l">What is your weight?</p>
          <div class="size-guide__input-group" data-unit="metric">
            <label for="size-guide-weight-kg" class="size-guide__label body">Weight</label>
            <div class="size-guide__input-wrapper">
              <input
                type="number"
                id="size-guide-weight-kg"
                class="size-guide__input body"
                min="55"
                max="140"
                placeholder="80"
              >
              <span class="size-guide__unit body">kg</span>
            </div>
            <span class="size-guide__hint small">Between 55kg and 140kg</span>
            <span class="size-guide__error small"></span>
          </div>
          <div class="size-guide__input-group" data-unit="imperial">
            <label for="size-guide-weight-lbs" class="size-guide__label body">Weight</label>
            <div class="size-guide__input-wrapper">
              <input
                type="number"
                id="size-guide-weight-lbs"
                class="size-guide__input body"
                min="121"
                max="309"
                placeholder="175"
              >
              <span class="size-guide__unit body">lbs</span>
            </div>
            <span class="size-guide__hint small">Between 121lbs and 309lbs</span>
            <span class="size-guide__error small"></span>
          </div>
        </div>

        <div class="size-guide__step" data-step="chest">
          <p class="size-guide__question heading--l">What is your chest measurement?</p>
          <p class="size-guide__instruction body">
            Measure around the fullest part of your chest, keeping the tape level.
          </p>
          <div class="size-guide__input-group" data-unit="metric">
            <label for="size-guide-chest-cm" class="size-guide__label body">Chest</label>
            <div class="size-guide__input-wrapper">
              <input
                type="number"
                id="size-guide-chest-cm"
                class="size-guide__input body"
                step="1"
                min="84"
                max="128"
                placeholder="96"
              >
              <span class="size-guide__unit body">cm</span>
            </div>
            <span class="size-guide__hint small">Between 84cm and 128cm</span>
            <span class="size-guide__error small"></span>
          </div>
          <div class="size-guide__input-group" data-unit="imperial">
            <label for="size-guide-chest-inches" class="size-guide__label body">Chest</label>
            <div class="size-guide__input-wrapper">
              <input
                type="number"
                id="size-guide-chest-inches"
                class="size-guide__input body"
                step="0.5"
                min="33"
                max="50"
                placeholder="38"
              >
              <span class="size-guide__unit body">in</span>
            </div>
            <span class="size-guide__hint small">Between 33" and 50"</span>
            <span class="size-guide__error small"></span>
          </div>
        </div>
      {% endif %}

      {% if category_type == 'waist' %}
        <div class="size-guide__step" data-step="waist">
          <p class="size-guide__question heading--l">What is your waist measurement?</p>
          <p class="size-guide__instruction body">
            Measure around your natural waistline, keeping the tape comfortably loose.
          </p>
          <div class="size-guide__input-group" data-unit="metric">
            <label for="size-guide-waist-cm" class="size-guide__label body">Waist</label>
            <div class="size-guide__input-wrapper">
              <input
                type="number"
                id="size-guide-waist-cm"
                class="size-guide__input body"
                step="1"
                min="72"
                max="116"
                placeholder="84"
              >
              <span class="size-guide__unit body">cm</span>
            </div>
            <span class="size-guide__hint small">Between 72cm and 116cm</span>
            <span class="size-guide__error small"></span>
          </div>
          <div class="size-guide__input-group" data-unit="imperial">
            <label for="size-guide-waist-inches" class="size-guide__label body">Waist</label>
            <div class="size-guide__input-wrapper">
              <input
                type="number"
                id="size-guide-waist-inches"
                class="size-guide__input body"
                step="0.5"
                min="28"
                max="46"
                placeholder="33"
              >
              <span class="size-guide__unit body">in</span>
            </div>
            <span class="size-guide__hint small">Between 28" and 46"</span>
            <span class="size-guide__error small"></span>
          </div>
        </div>
      {% endif %}

      {% if category_type == 'shirt' %}
        <div class="size-guide__step" data-step="neck">
          <p class="size-guide__question heading--l">What is your neck measurement?</p>
          <p class="size-guide__instruction body">
            Measure around the base of your neck, allowing one finger gap between tape and skin.
          </p>
          <div class="size-guide__input-group" data-unit="metric">
            <label for="size-guide-neck-cm" class="size-guide__label body">Neck</label>
            <div class="size-guide__input-wrapper">
              <input
                type="number"
                id="size-guide-neck-cm"
                class="size-guide__input body"
                step="0.5"
                min="37"
                max="50"
                placeholder="40"
              >
              <span class="size-guide__unit body">cm</span>
            </div>
            <span class="size-guide__hint small">Between 37cm and 50cm</span>
            <span class="size-guide__error small"></span>
          </div>
          <div class="size-guide__input-group" data-unit="imperial">
            <label for="size-guide-neck-inches" class="size-guide__label body">Neck</label>
            <div class="size-guide__input-wrapper">
              <input
                type="number"
                id="size-guide-neck-inches"
                class="size-guide__input body"
                step="0.25"
                min="14"
                max="20"
                placeholder="16"
              >
              <span class="size-guide__unit body">in</span>
            </div>
            <span class="size-guide__hint small">Between 14" and 20"</span>
            <span class="size-guide__error small"></span>
          </div>
        </div>
      {% endif %}

      <div class="size-guide__step" data-step="preference">
        <p class="size-guide__question heading--l">How do you prefer your fit?</p>
        <div class="size-guide__options size-guide__options--fit">
          <button type="button" class="size-guide__option" data-preference="easy">
            <span class="size-guide__option-title body--bold">Looser</span>
            <span class="size-guide__option-desc small">More room for comfort</span>
          </button>
          <button type="button" class="size-guide__option" data-preference="regular">
            <span class="size-guide__option-title body--bold">Regular</span>
            <span class="size-guide__option-desc small">Classic tailored fit</span>
          </button>
          <button type="button" class="size-guide__option" data-preference="slim">
            <span class="size-guide__option-title body--bold">Slimmer</span>
            <span class="size-guide__option-desc small">Close to the body</span>
          </button>
        </div>
      </div>

      <div class="size-guide__step" data-step="result">
        <div class="size-guide__result">
          <div class="size-guide__result-header">
            <p class="size-guide__result-label body--uppercase">Your Recommended Size</p>
            <p class="size-guide__result-size heading--3xl"></p>
          </div>
          <div class="size-guide__result-details">
            {% if category_type == 'fit-chest' %}
              <div class="size-guide__result-item" data-result="chest">
                <span class="size-guide__result-item-label body">Chest</span>
                <span class="size-guide__result-item-value body--bold"></span>
              </div>
              <div class="size-guide__result-item" data-result="fit">
                <span class="size-guide__result-item-label body">Fit</span>
                <span class="size-guide__result-item-value body--bold"></span>
              </div>
              <div class="size-guide__result-item" data-result="trouser">
                <span class="size-guide__result-item-label body">Trouser Size</span>
                <span class="size-guide__result-item-value body--bold"></span>
              </div>
            {% endif %}
            <div class="size-guide__result-item" data-result="confidence">
              <span class="size-guide__result-item-label body">Confidence</span>
              <span class="size-guide__result-item-value body--bold"></span>
            </div>
          </div>
          <button type="button" class="size-guide__restart body">Start Over</button>
        </div>
        <div class="size-guide__result size-guide__result--mtm">
          <div class="size-guide__result-header">
            <p class="size-guide__result-label body--uppercase">Made to Measure</p>
            <p class="size-guide__result-message body">
              Based on your measurements, we recommend our Made to Measure program for the perfect fit.
            </p>
          </div>
          <a href="/pages/made-to-measure" class="size-guide__mtm-link body--bold">Learn More</a>
          <button type="button" class="size-guide__restart body">Start Over</button>
        </div>
      </div>
    </div>

    <div class="size-guide__navigation">
      <button type="button" class="size-guide__nav-back body">
        <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 1L1 6L6 11" stroke="currentColor" stroke-linecap="square"/>
        </svg>
        Back
      </button>
      <button type="button" class="size-guide__nav-next body">
        Continue
        <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M1 1L6 6L1 11" stroke="currentColor" stroke-linecap="square"/>
        </svg>
      </button>
    </div>
  </div>
{% endif %}

<script src="{{ 'snippet-size-guide.js' | asset_url }}" defer></script>
