if(!customElements.get("accordion-element")){let t=0;globalThis.accordions=[];class e extends HTMLElement{#a;#b;#c;#d;#e;#f;#g;#h;#i;#j;constructor({title:e,id:i,isOpen:s,group:n}={}){super(),this.#a=e??this.dataset.title??"",this.#b=i??this.dataset.id??t++,this.#c=s??this.dataset.isOpen??!1,this.#d=n??this.dataset.group??"",globalThis.accordions.push(this),this.#g=null}#k(){let i=this.querySelector("div.ploiu-accordion-title");if(i)return i.addEventListener("click",()=>this.toggle()),i;{let s=document.createElement("div");return s.classList.add("ploiu-accordion-title"),s.innerText=this.#a,s.addEventListener("click",()=>this.toggle()),s}}#l(){let n=this.querySelector("div.ploiu-accordion-body");if(n)return n;{let h=document.createElement("div");h.classList.add("ploiu-accordion-body");let o=[...this.childNodes].filter(t=>!t.classList?.contains("ploiu-accordion-title"));for(let r of o){let l=r;h.appendChild(l.cloneNode(!0)),l.remove()}return h}}#m(){let c=[],d=this.parentNode;for(;d?.parentNode;)c.push(d.parentNode),d=d.parentNode;return c.find(t=>t?.tagName==="ACCORDION-ELEMENT")||null}#n(){let a=[],p=this.#g;for(;p;)a.push(p),p=p.findParentAccordion();return a}#o(u){if(this.#g?.isOpen){let f=Number.parseFloat(this.#g.bodyElement.style.height.replace("px",""))+u;this.#g.bodyElement.style.height=f+"px",this.#g.adjustParentHeight(u)}}#p(g){if(this.#g?.isOpen){let y=Number.parseFloat(this.#g.bodyElement.style.height.replace("px",""))-g;this.#g.bodyElement.style.height=y+"px",this.#g.reduceParentHeight(g)}}adjustParentHeight(t){this.#o(t)}reduceParentHeight(t){this.#p(t)}findParentAccordion(){return this.#m()}get accordionId(){return this.#b}get group(){return this.#d}set group(t){this.#d=t,this.dataset.group=t}get title(){return this.#a}set title(t){if("string"==typeof t)this.#a=t,this.isConnected&&(this.#e.innerText=t);else if(t instanceof Node){if(!this.isConnected)throw"Can't set an accordion element title to a node when it hasn't been appended to the document!";this.#a="",this.#e.innerText="",[...this.#e.children].forEach(t=>t.remove()),this.#e.appendChild(t)}}get isOpen(){return this.#c}get bodyElement(){return this.#f}set body(t){if(!this.isConnected)throw"Can't set an accordion element body when it hasn't been appended to the document!";Array.from(this.#f.children).forEach(t=>t?.remove()),this.#f.appendChild(t)}expand(){let t=this.#n();e.findAccordionsByGroup(this.#d).filter(e=>e!==this&&!t.includes(e)&&this.#g===e.findParentAccordion()).forEach(t=>t.collapse()),this.#c=!0,this.#f.style.height=`${this.#f.scrollHeight}px`,this.#o(this.#f.scrollHeight),this.classList.add("open")}collapse(){this.#c&&(this.#c=!1,this.#g&&this.#p(this.bodyElement.scrollHeight),this.#f.style.height="0",this.classList.remove("open"),Array.from(this.querySelectorAll("accordion-element")).forEach(t=>t.collapse()))}toggle(){this.#c?this.collapse():this.expand()}connectedCallback(){!this.#h&&this.isConnected&&(this.#e=this.#k(),this.#f=this.#l(),this.appendChild(this.#e),this.appendChild(this.#f),(void 0!==this.dataset.open||this.#c)&&this.expand(),this.#g=this.#m(),null!==this.#g?this.#i=this.#g.scrollHeight:this.#i=0,this.#q(),this.#h=!0)}disconnectedCallback(){this.#j&&this.#j.disconnect()}#q(){this.#j=new MutationObserver(t=>{for(let e of t)"childList"===e.type&&this.#c&&this.#r()}),this.#j.observe(this,{childList:!0,subtree:!0})}#r(){this.#g&&(this.#f.style.transition="none"),this.#f.style.height="auto";let m=this.#f.scrollHeight+"px";this.#f.style.transition="var(--accordion-expand-rate)",requestAnimationFrame(()=>{this.#f.style.height=m})}static findAccordionById(t){try{return globalThis.accordions.filter(e=>e.id===t)[0]}catch{return null}}static findAccordionsByGroup(t){return[...document.querySelectorAll("accordion-element")].filter(e=>e.group?.toLowerCase()===t.toLowerCase())}}class C extends HTMLElement{connectedCallback(){this.isConnected&&(Array.from(this.querySelectorAll("accordion-element")).forEach(e=>e.group=`fan-${t}`),t++)}}customElements.define("accordion-element",e),customElements.define("accordion-fan",C),globalThis.AccordionElement=e}